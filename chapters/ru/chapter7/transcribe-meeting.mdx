# –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏

–í —ç—Ç–æ–º –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–¥–µ–ª—å Whisper –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏–ª–∏ –≤—Å—Ç—Ä–µ—á–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –∏–ª–∏ –±–æ–ª–µ–µ –≥–æ–≤–æ—Ä—è—â–∏–º–∏. –ó–∞—Ç–µ–º –º—ã –æ–±—ä–µ–¥–∏–Ω–∏–º
–µ–µ —Å –º–æ–¥–µ–ª—å—é *–¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–∏–∫—Ç–æ—Ä–∞* –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è "–∫—Ç–æ –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏–ª". –°–æ–ø–æ—Å—Ç–∞–≤–∏–≤ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ Whisper —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –æ—Ç –º–æ–¥–µ–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏,
–º—ã –º–æ–∂–µ–º —Å–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∫–≤–æ–∑–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –≤—Å—Ç—Ä–µ—á–∏ —Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ–≤–æ—Ä—è—â–µ–≥–æ. –≠—Ç–æ –±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —É—Å–ª—É–≥ –ø–æ
—Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏—é —Å–æ–≤–µ—â–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—É—é –≤—ã –º–æ–≥–ª–∏ –≤–∏–¥–µ—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –æ—Ç —Ç–∞–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π, –∫–∞–∫ [Otter.ai](https://otter.ai) –∏ –¥—Ä:

<div class="flex justify-center">
     <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/diarization_transcription.png">
 </div>

## –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è –¥–∏–∫—Ç–æ—Ä–∞

–î–∏–∞—Ä–∏–∑–∞—Ü–∏—è –¥–∏–∫—Ç–æ—Ä–∞ (–∏–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è) - —ç—Ç–æ –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—É–¥–∏–æ–¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≥–æ, "–∫—Ç–æ –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏–ª". –ü—Ä–∏ —ç—Ç–æ–º –º—ã –º–æ–∂–µ–º
–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –Ω–∞—á–∞–ª–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–∞–∂–¥–æ–π –æ—á–µ—Ä–µ–¥–∏ –¥–∏–∫—Ç–æ—Ä–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–æ–º–µ–Ω—Ç—É –Ω–∞—á–∞–ª–∞ —Ä–µ—á–∏ –∏ –º–æ–º–µ–Ω—Ç—É –µ–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è.

ü§ó –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Transformers –Ω–µ—Ç –º–æ–¥–µ–ª–∏ –¥–ª—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–∏–∫—Ç–æ—Ä–∞, –Ω–æ –Ω–∞ Hub –µ—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
—Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –ª–µ–≥–∫–æ—Å—Ç—å—é. –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–∏–∫—Ç–æ—Ä–∞ –∏–∑ [pyannote.audio](https://github.com/pyannote/pyannote-audio).
–î–∞–≤–∞–π—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏–º –∫ —Ä–∞–±–æ—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç —Å –ø–æ–º–æ—â—å—é pip:

```bash
pip install --upgrade pyannote.audio
```

–û—Ç–ª–∏—á–Ω–æ! –í–µ—Å–∞ –¥–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã –Ω–∞ Hugging Face Hub. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø, —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
–¥–∏–∫—Ç–æ—Ä–∞: [pyannote/speaker-diarization](https://huggingface.co/pyannote/speaker-diarization). –ê –∑–∞—Ç–µ–º - —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏
—Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏: [pyannote/segmentation](https://huggingface.co/pyannote/segmentation).

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –º—ã –º–æ–∂–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—É—á–µ–Ω–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–∏–∫—Ç–æ—Ä–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –Ω–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:

```python
from pyannote.audio import Pipeline

diarization_pipeline = Pipeline.from_pretrained(
    "pyannote/speaker-diarization@2.1", use_auth_token=True
)
```

–î–∞–≤–∞–π—Ç–µ –æ–ø—Ä–æ–±—É–µ–º –µ–≥–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞! –î–ª—è —ç—Ç–æ–≥–æ –º—ã –∑–∞–≥—Ä—É–∑–∏–º –æ–±—Ä–∞–∑–µ—Ü –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ [LibriSpeech ASR](https://huggingface.co/datasets/librispeech_asr), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ä–µ—á—å
–¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö –¥–∏–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏ –≤ –æ–¥–∏–Ω –∞—É–¥–∏–æ—Ñ–∞–π–ª:

```python
from datasets import load_dataset

concatenated_librispeech = load_dataset(
    "sanchit-gandhi/concatenated_librispeech", split="train", streaming=True
)
sample = next(iter(concatenated_librispeech))
```

–ú—ã –º–æ–∂–µ–º –ø—Ä–æ—Å–ª—É—à–∞—Ç—å –∞—É–¥–∏–æ–∑–∞–ø–∏—Å—å, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–Ω–∞ –∑–≤—É—á–∏—Ç:

```python
from IPython.display import Audio

Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
```

–ö–ª–∞—Å—Å! –ú—ã –æ—Ç—á–µ—Ç–ª–∏–≤–æ —Å–ª—ã—à–∏–º –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö –¥–∏–∫—Ç–æ—Ä–æ–≤ —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 15 —Å–µ–∫—É–Ω–¥–µ –∑–≤—É—á–∞–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–¥–∞–¥–∏–º —ç—Ç–æ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª –≤ –º–æ–¥–µ–ª—å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å
–≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –ó–∞–º–µ—Ç–∏–º, —á—Ç–æ pyannote.audio –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –≤—Ö–æ–¥–Ω–æ–π –∞—É–¥–∏–æ—Ñ–∞–π–ª –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π —Ç–µ–Ω–∑–æ—Ä PyTorch —Ñ–æ—Ä–º—ã `(channels, seq_len)`,
–ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–æ–¥–µ–ª–∏ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:

```python
import torch

input_tensor = torch.from_numpy(sample["audio"]["array"][None, :]).float()
outputs = diarization_pipeline(
    {"waveform": input_tensor, "sample_rate": sample["audio"]["sampling_rate"]}
)

outputs.for_json()["content"]
```

```text
[{'segment': {'start': 0.4978125, 'end': 14.520937500000002},
  'track': 'B',
  'label': 'SPEAKER_01'},
 {'segment': {'start': 15.364687500000002, 'end': 21.3721875},
  'track': 'A',
  'label': 'SPEAKER_00'}]
```

–í—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –Ω–µ–ø–ª–æ—Ö–æ! –í–∏–¥–Ω–æ, —á—Ç–æ –ø–µ—Ä–≤—ã–π –¥–∏–∫—Ç–æ—Ä –≥–æ–≤–æ—Ä–∏—Ç –¥–æ –æ—Ç–º–µ—Ç–∫–∏ 14,5 —Å–µ–∫—É–Ω–¥—ã, –∞ –≤—Ç–æ—Ä–æ–π - —Å 15,4 —Å–µ–∫—É–Ω–¥—ã.
–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é!

## –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—á–∏

–í —Ç—Ä–µ—Ç–∏–π —Ä–∞–∑ –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å Whisper –¥–ª—è –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ —Ä–µ—á–∏. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –º—ã –∑–∞–≥—Ä—É–∑–∏–º –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Ç–æ—á–∫—É [Whisper Base](https://huggingface.co/openai/whisper-base),
–ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞–ª–∞, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ö–æ—Ä–æ—à—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –ø—Ä–∏ –ø—Ä–∏–µ–º–ª–µ–º–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏. –ö–∞–∫ –∏ –ø—Ä–µ–∂–¥–µ, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Ç–æ—á–∫—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ —Å 
[Hub](https://huggingface.co/models?pipeline_tag=automatic-speech-recognition&library=transformers&sort=trending), –≤–∫–ª—é—á–∞—è Wav2Vec2, MMS ASR –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ Whisper:

```python
from transformers import pipeline

asr_pipeline = pipeline(
    "automatic-speech-recognition",
    model="openai/whisper-base",
)
```

–î–∞–≤–∞–π—Ç–µ –ø–æ–ª—É—á–∏–º —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –¥–ª—è –Ω–∞—à–µ–≥–æ –æ–±—Ä–∞–∑—Ü–∞ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–∏, –≤–æ–∑–≤—Ä–∞—â–∞—è —Ç–∞–∫–∂–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞.
–ò–∑ —Ä–∞–∑–¥–µ–ª–∞ 5 –≤—ã –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤ Whisper –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `return_timestamps=True`:

```python
asr_pipeline(
    sample["audio"].copy(),
    generate_kwargs={"max_new_tokens": 256},
    return_timestamps=True,
)
```

```text
{
    "text": " The second and importance is as follows. Sovereignty may be defined to be the right of making laws. In France, the king really exercises a portion of the sovereign power, since the laws have no weight. He was in a favored state of mind, owing to the blight his wife's action threatened to cast upon his entire future.",
    "chunks": [
        {"timestamp": (0.0, 3.56), "text": " The second and importance is as follows."},
        {
            "timestamp": (3.56, 7.84),
            "text": " Sovereignty may be defined to be the right of making laws.",
        },
        {
            "timestamp": (7.84, 13.88),
            "text": " In France, the king really exercises a portion of the sovereign power, since the laws have",
        },
        {"timestamp": (13.88, 15.48), "text": " no weight."},
        {
            "timestamp": (15.48, 19.44),
            "text": " He was in a favored state of mind, owing to the blight his wife's action threatened to",
        },
        {"timestamp": (19.44, 21.28), "text": " cast upon his entire future."},
    ],
}
```

–û—Ç–ª–∏—á–Ω–æ! –ú—ã –≤–∏–¥–∏–º, —á—Ç–æ –∫–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∏–º–µ–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ –∏ –∫–æ–Ω–µ—á–Ω–æ–µ –≤—Ä–µ–º—è, –ø—Ä–∏—á–µ–º —Å–º–µ–Ω–∞ –¥–∏–∫—Ç–æ—Ä–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –æ—Ç–º–µ—Ç–∫–µ 15,48 —Å–µ–∫—É–Ω–¥—ã. –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å
—ç—Ç—É —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –¥–∏–∫—Ç–æ—Ä–æ–≤, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏, –∏ –ø–æ–ª—É—á–∏—Ç—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é.

## Speechbox

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é, —Å–æ–≤–º–µ—Å—Ç–∏–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏, —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ Whisper.
–ú–æ–¥–µ–ª—å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª–∞ –æ–∫–æ–Ω—á–∞–Ω–∏–µ —Ä–µ—á–∏ –ø–µ—Ä–≤–æ–≥–æ –¥–∏–∫—Ç–æ—Ä–∞ –Ω–∞ 14,5 —Å, –∞ –≤—Ç–æ—Ä–æ–≥–æ - –Ω–∞ 15,4 —Å, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ Whisper –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª –≥—Ä–∞–Ω–∏—Ü—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –Ω–∞ 13,88, 15,48 –∏ 19,44 —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
–ü–æ—Å–∫–æ–ª—å–∫—É –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é Whisper, –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏, –∫–∞–∫–∏–µ –∏–∑ —ç—Ç–∏—Ö –≥—Ä–∞–Ω–∏—Ü –±–ª–∏–∂–µ –≤—Å–µ–≥–æ –∫ 14,5 –∏ 15,4 —Å, –∏
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –ø–æ –¥–∏–∫—Ç–æ—Ä–∞–º. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –º—ã –Ω–∞–π–¥–µ–º –Ω–∞–∏–±–æ–ª–µ–µ –±–ª–∏–∑–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –º–µ–∂–¥—É –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏,
–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–≤ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏.

–ö —Å—á–∞—Å—Ç—å—é –¥–ª—è –Ω–∞—Å, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç ü§ó Speechbox –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è. –°–Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç `speechbox` –∏–∑ main:

```bash
pip install git+https://github.com/huggingface/speechbox
```

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏, –ø–µ—Ä–µ–¥–∞–≤ –º–æ–¥–µ–ª—å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –∏
–º–æ–¥–µ–ª—å ASR –≤ –∫–ª–∞—Å—Å [`ASRDiarizationPipeline`](https://github.com/huggingface/speechbox/tree/main#asr-with-speaker-diarization):

```python
from speechbox import ASRDiarizationPipeline

pipeline = ASRDiarizationPipeline(
    asr_pipeline=asr_pipeline, diarization_pipeline=diarization_pipeline
)
```

<Tip>
    –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞—Ç—å  <code>ASRDiarizationPipeline</code> directly –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, —É–∫–∞–∑–∞–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä 
    –º–æ–¥–µ–ª–∏ ASR –Ω–∞ Hub:
    <p><code>pipeline = ASRDiarizationPipeline.from_pretrained("openai/whisper-base")</code></p>
</Tip>

–ü–µ—Ä–µ–¥–∞–¥–∏–º –∞—É–¥–∏–æ—Ñ–∞–π–ª –≤ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:

```python
pipeline(sample["audio"].copy())
```

```text
[{'speaker': 'SPEAKER_01',
  'text': ' The second and importance is as follows. Sovereignty may be defined to be the right of making laws. In France, the king really exercises a portion of the sovereign power, since the laws have no weight.',
  'timestamp': (0.0, 15.48)},
 {'speaker': 'SPEAKER_00',
  'text': " He was in a favored state of mind, owing to the blight his wife's action threatened to cast upon his entire future.",
  'timestamp': (15.48, 21.28)}]
```

–û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–≤—ã–π –¥–∏–∫—Ç–æ—Ä —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –≥–æ–≤–æ—Ä—è—â–∏–π —Å 0 –¥–æ 15,48 —Å–µ–∫—É–Ω–¥—ã, –∞ –≤—Ç–æ—Ä–æ–π - —Å 15,48 –¥–æ 21,28 —Å–µ–∫—É–Ω–¥—ã,
—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö.

–î–ª—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–≤–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ü–µ—Ä–≤–∞—è –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∫–æ—Ä—Ç–µ–∂ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤ —Å—Ç—Ä–æ–∫—É, –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—É—é
–¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π. –í—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∏–∫—Ç–æ—Ä–∞, –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É –∏ —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
—á—Ç–µ–Ω–∏—è —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∫–∞–∂–¥–æ–≥–æ –¥–∏–∫—Ç–æ—Ä–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:

```python
def tuple_to_string(start_end_tuple, ndigits=1):
    return str((round(start_end_tuple[0], ndigits), round(start_end_tuple[1], ndigits)))


def format_as_transcription(raw_segments):
    return "\n\n".join(
        [
            chunk["speaker"] + " " + tuple_to_string(chunk["timestamp"]) + chunk["text"]
            for chunk in raw_segments
        ]
    )
```

–ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏–º –∫–æ–Ω–≤–µ–π–µ—Ä, –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä—É—é –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏:

```python
outputs = pipeline(sample["audio"].copy())

format_as_transcription(outputs)
```

```text
SPEAKER_01 (0.0, 15.5) The second and importance is as follows. Sovereignty may be defined to be the right of making laws.
In France, the king really exercises a portion of the sovereign power, since the laws have no weight.

SPEAKER_00 (15.5, 21.3) He was in a favored state of mind, owing to the blight his wife's action threatened to cast upon
his entire future.
```

–í–æ—Ç —Ç–∞–∫! –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –ø—Ä–æ–≤–µ–ª–∏ –¥–∏–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é –≤—Ö–æ–¥–Ω–æ–≥–æ –∞—É–¥–∏–æ—Å–∏–≥–Ω–∞–ª–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π –¥–∏–∫—Ç–æ—Ä–æ–≤. –•–æ—Ç—è –∞–ª–≥–æ—Ä–∏—Ç–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–ª—è
–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç, –æ–Ω —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑—É—á–∏—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–æ–≤–º–µ—â–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫, —Ç–æ –∏—Å—Ö–æ–¥–Ω—ã–π
–∫–æ–¥ `ASRDiarizationPipeline` —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π: [speechbox/diarize.py](https://github.com/huggingface/speechbox/blob/96d2d1a180252d92263f862a1cd25a48860f1aed/src/speechbox/diarize.py#L12)
